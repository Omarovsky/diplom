# diplom
–≠—Ç–æ –º–æ—è –¥–∏–ø–ª–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –Ω–æ –æ–Ω–∞ –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –û—Å—Ç–∞—ë—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ —è –Ω–∞–¥ –Ω–∏–º —É–∂–µ —Ä–∞–±–æ—Ç–∞—é –∏ –¥–∞–∂–µ –µ—Å—Ç—å —ç—Å–∫–∏–∑—ã, –Ω–æ –≤—ã–∫–ª–∞–¥—ã–≤–∞—Ç—å —è –∏—Ö –Ω–µ —Å—Ç–∞–ª.

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞ NeDis

##  –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**NeDis** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–∏:
-  –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è
-  –õ–∏—á–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å end-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
-  –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ WebRTC
-  –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏


## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **Python 3.8+** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Python 3.9+)
- **pip** (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)
- **Git** (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **4 GB RAM** (–¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
- **1 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞** –Ω–∞ –¥–∏—Å–∫–µ
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** (–¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
NeDis/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AsyncSession SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py           # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils.py             # JWT –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ crud.py              # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ routers/
‚îÇ       ‚îú‚îÄ‚îÄ auth.py          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ users.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ chat.py          # API –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ chat_ws.py       # WebSocket —á–∞—Ç
‚îÇ       ‚îú‚îÄ‚îÄ direct.py        # –õ–∏—á–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏
‚îÇ       ‚îú‚îÄ‚îÄ ws_direct.py     # WebSocket –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ webrtc.py        # WebRTC –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ direct_chat(1).html  # –û—Å–Ω–æ–≤–Ω–æ–π HTML-—Ñ–∞–π–ª
‚îÇ
‚îú‚îÄ‚îÄ req.txt                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
git clone https://github.com/omarovsky/diplom.git
cd diplom
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Windows:**
```cmd
python -m .venv venv
.venv\Scripts\activate
```

**Linux/Mac:**
```bash
python3 -m venv .venv
source .venv/bin/activate
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r req.txt
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.
–§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: `discord.db`

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞


### –°–ø–æ—Å–æ–± 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ uvicorn
```bash
uvicorn app.main:app --reload
```

### –°–ø–æ—Å–æ–± 2: –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

**Windows:**
```cmd
start_windows.bat
```

## üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

- **–ó–∞—Ö–æ–¥–∏–º —á–µ—Ä–µ–∑ HTML —Ñ–∞–π–ª** diplom\templates\direct_chat(1).html
- **Swagger UI (API swagger):** http://localhost:8000/docs
- **ReDoc (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π  swagger):** http://localhost:8000/redoc

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X POST "http://localhost:8000/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "full_name": "Test User",
    "password": "securepassword123"
  }'
```

### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```bash
curl -X POST "http://localhost:8000/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=testuser&password=securepassword123"
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
```bash
curl -X POST "http://localhost:8000/chat/channels" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -d '{"name": "general"}'
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
–í —Ñ–∞–π–ª–µ `app/utils.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
- `SECRET_KEY` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
- `ACCESS_TOKEN_EXPIRE_MINUTES` ‚Äî –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞


### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–í —Ñ–∞–π–ª–µ `app/database.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
```python
DATABASE_URL = "sqlite+aiosqlite:///./discord.db"
```

## üö´ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "ModuleNotFoundError"
```bash
pip install --upgrade pip
pip install -r req.txt
```

### –û—à–∏–±–∫–∞: "Port already in use"
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç 8000
netstat -ano | findstr :8000  # Windows
lsof -i :8000                 # Linux/Mac

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
uvicorn app.main:app --port 8001 --reload
```

### –û—à–∏–±–∫–∞: "Database locked"
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª discord.db
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```


## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
```bash
uvicorn app.main:app --log-level info --access-log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
curl http://localhost:8000/docs
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
uvicorn app.main:app --reload --log-level debug
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```bash
pip install black isort
black app/
isort app/
```


## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

**–í–µ—Ä—Å–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** 0.1v  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 15 –∏—é–Ω—è 2025  
**–ê–≤—Ç–æ—Ä:** –û–º–∞—Ä–æ–≤ –ê–±–¥—É–ª–ª–∞ –≠–ª—å–º–∞–Ω–æ–≤–∏—á
